- id: [0,0]
  name: Category
  info: Category of items that represent categories
  schema:
    fields:
      schema:
        "@": hyperweb.types.Object
        class_: {"=": hyperweb.schema.Schema, "@": builtins.type}
      name:
        "@": hyperweb.schema.Field
        type: {"@": hyperweb.types.String}
        info: human-readable title of the category
      info: {"@": hyperweb.types.String}
      itemclass:
        "@": hyperweb.schema.Field
        type: {"@": hyperweb.types.Class}
        default: {"=": hyperweb.item.Item, "@": builtins.type}
      templates:
        "@": hyperweb.schema.Field
        type: {"@": hyperweb.types.Dict, keys: {"@": hyperweb.types.String}, values: {"@": hyperweb.types.String}}
        default:
          "": |
              context $view
              $item = view._item
              $cat  = item.category

              style !
                  body { font: 20px/30px 'Quattrocento Sans', "Helvetica Neue", Helvetica, Arial, sans-serif; }
                  h1 { font-size: 26px; line-height: 34px }
                  .catlink { font-size: 14px; margin-top: -20px }

              % category
                  p .catlink
                      a href=$cat.get_url() | {cat['name']? or cat}
                      | ($item.cid,$item.iid)

              html
                  $name = item['name']? or str(item)
                  head
                      title | {name}
                  body
                      h1  | {name} - from YAML
                      category
                      h2  | Attributes
                      ul
                          for attr, value in item.data.items()
                              li
                                  b | {attr}:
                                  . | {str(value)}

    strict: true
  itemclass: hyperweb.item.Category
  templates:
    "": |
        context $view
        $cat = view._item

        html
            $name = cat['name']? or str(cat)
            head
                title | {name ' -' }? category #{cat.iid}
            body
                h1
                    try
                        i | $name
                        . | -
                    | category #{cat.iid} - from YAML
                h2  | Attributes
                ul
                    for attr, value in cat.data.items()
                        li
                            b | {attr}:
                            . | {str(value)}
                h2  | Items
                table
                    for item in cat.load_items()
                        tr
                            td / #{item.iid} &nbsp;
                            td : a href=$item.get_url()
                                | {item['name']? or item}

- id: [0,1]
  name: Site
  info: Category of site records. A site contains information about applications, servers, startup
  schema:
    fields:
      app:
        "@": hyperweb.types.Link
        cid: 2
      name: {"@": hyperweb.types.String}
      base_url: {"@": hyperweb.types.String}
  itemclass: hyperweb.item.Site

- id: [0,2]
  name: Application
  info: Category of application records. An application groups all spaces & categories
    available in the system and provides system-level configuration.
  schema:
    fields:
      spaces:
        "@": hyperweb.types.Dict
        keys: {"@": hyperweb.types.String}
        values: {"@": hyperweb.types.Link, cid: 3}
      name: {"@": hyperweb.types.String}

- id: [0,3]
  name: Space
  info: Category of items that represent item spaces.
  schema:
    fields:
      categories:
        "@": hyperweb.types.Dict
        keys: {"@": hyperweb.types.String}
        values: {"@": hyperweb.types.Link, cid: 0}
      name: {"@": hyperweb.types.String}

- id: [0,4]
  name: Mapping
  info: Category of items that represent mappings, i.e., sharded indexes on top of
    item-item or item-value relations

- id: [0,100]
  name: Item
  info: Category of items that do not belong to any specific category
  schema:
    fields: {}
    strict: false

- id: [1,1]
  app: 1
  name: catalog.wiki
  base_url: http://localhost:8001

- id: [2,1]
  name: Catalog.wiki
  spaces:
    sys: 2
    meta: 1

- id: [3,1]
  name: Meta
  categories:
    map: 4
    item: 100
    category: 0

- id: [3,2]
  name: System
  categories:
    app: 2
    site: 1
    space: 3

- id: [100,1]
  multi: [1,2,null]
  title: Ala ma kota Sierściucha i psa Kłapoucha.
  value: 100000
  struct: [[123, 4567854, 98765400, null]]
  fulltext: some text some text some text some text some text some text some text
    some text STOP
  another_value: 23.046

- {id: [100,2], name: ["test_item", "duplicate"], title: ąłęÓŁŻŹŚ}
- {id: [100,3], name: ["test_item2"], title: ąłęÓŁŻŹŚ}
- {id: [100,4], name: test_item3, title: ąłęÓŁŻŹŚ}
- {id: [100,5], name: test_item4, title: ąłęÓŁŻŹŚ}
- {id: [100,6], name: ["test_item", "duplicate"], title: ąłęÓŁŻŹŚ}
- {id: [100,7], name: ["test_item", "duplicate"], title: ABCD}
- {id: [100,8], name: ["test_item", "duplicate"], title: ABCD}
- {id: [100,9], name: ["test_item", "duplicate"], title: ABCD}
- {id: [100,10], name: ["test_item", "duplicate"], title: ABCD}
