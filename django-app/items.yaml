- id: [0, 0]
  name: Category
  info: Category of items that represent categories
  class_name: hyperweb.item.Category
  endpoints: {__view__: "\ncontext $item as cat, $app, $files\nfrom base import %page,\
      \ %assets, %properties\n\n. #dedent\n    < page\n        $name = cat['name']?\
      \ or str(cat)\n        head\n            title | {name ' -' }? category #{cat.iid}\n\
      \            assets\n            style / $files.open('base.css')['source']\n\
      \n        body\n            h1\n                try\n                    i |\
      \ $name\n                    . | -\n                | category #{cat.iid}\n\n\
      \            h2 | Properties\n\n            properties $cat\n\n            h2\
      \ | Items\n            table\n                for item in list(cat.registry.load_items(cat))\n\
      \                    tr\n                        td / #{item.iid} &nbsp;\n \
      \                       td\n                            $ iname = item['name']?\
      \ or item\n                            try\n                               \
      \ a href=app.url(item) | $iname\n                            else\n        \
      \                        | $iname (no public URL)\n"}
  fields:
    name:
      schema: {'@': hyperweb.schema.STRING}
      info: human-readable title of the category
    info:
      schema: {'@': hyperweb.schema.STRING}
    class_name:
      schema: {'@': hyperweb.schema.STRING}
      default: hyperweb.item.Item
      info: Full (dotted) path of a python class. Or the class name that should be
        imported from `class_code` after its execution.
    class_code:
      schema: {'@': hyperweb.schema.TEXT}
    endpoints:
      schema:
        values: {'@': hyperweb.schema.CODE}
        '@': hyperweb.schema.CATALOG
      default: {__view__: "\ncontext $item, $category as cat, $app, $files\nfrom base\
          \ import %page, %assets, %properties\n\n. #dedent\n    % print_headline\n\
          \            p .catlink\n            a href=$app.url(cat) | {cat['name']?\
          \ or cat}\n            | ($item.cid,$item.iid)\n\n    < page\n        $name\
          \ = item['name']? or str(item)\n        head\n            title | {name}\n\
          \            assets\n            style / $files.open('base.css')['source']\n\
          \n        # body .container : div .row\n        #   div .col-1\n       \
          \ #   div .col-10\n        body\n            h1  | {name}\n            print_headline\n\
          \            \n            h2 | Properties\n            properties $item\n\
          \            # print_catalog1 $item\n          \n"}
    fields:
      schema:
        values:
          schema:
            schema:
              type: []
              base: {'=': hyperweb.schema.Schema, '@': builtins.type}
              '@': hyperweb.schema.OBJECT
            '@': hyperweb.schema.Field
          default:
            schema:
              type: []
              base: []
              '@': hyperweb.schema.OBJECT
            '@': hyperweb.schema.Field
          multi:
            schema: {'@': hyperweb.schema.BOOLEAN}
            '@': hyperweb.schema.Field
          info:
            schema: {'@': hyperweb.schema.STRING}
            '@': hyperweb.schema.Field
          '@': hyperweb.schema.FIELD
        type: {'=': hyperweb.schema.FIELDS, '@': builtins.type}
        '@': hyperweb.schema.CATALOG
- id: [0, 1]
  name: Directory
  info: A directory of items, each item has a unique name (path). May contain nested
    subdirectories. Similar to a file system.
  class_name: hyperweb.item.Directory
  fields:
    items:
      schema:
        keys: {'@': hyperweb.schema.FILENAME}
        values: {'@': hyperweb.schema.FILE}
        '@': hyperweb.schema.CATALOG
- id: [0, 2]
  name: Space
  info: Category of items that represent item spaces.
  fields:
    name:
      schema: {'@': hyperweb.schema.STRING}
    categories:
      schema:
        values:
          category:
            '=': [0, 0]
            '@': (item)
          '@': hyperweb.schema.ITEM
        '@': hyperweb.schema.CATALOG
  class_name: Space
  class_code: "\n        from hyperweb.item import Item\n        class Space(Item):\n\
    \            def get_category(self, name):\n                return self['categories'][name]\n\
    \    "
- id: [0, 3]
  name: Application
  info: Category of application records. An application groups all spaces & categories
    available in the system and provides system-level configuration.
  class_name: hyperweb.item.Application
  fields:
    name:
      schema: {'@': hyperweb.schema.STRING}
    url_scheme:
      schema:
        values: [raw, spaces]
        indices: false
        '@': hyperweb.schema.ENUM
    spaces:
      schema:
        values:
          category:
            '=': [0, 2]
            '@': (item)
          '@': hyperweb.schema.ITEM
        '@': hyperweb.schema.CATALOG
  folder: {'@': hyperweb.schema.FILEPATH}
- id: [0, 4]
  name: Site
  info: Category of site records. A site contains information about applications,
    servers, startup
  class_name: hyperweb.item.Site
  fields:
    name:
      schema: {'@': hyperweb.schema.STRING}
    apps:
      schema:
        values:
          category:
            '=': [0, 3]
            '@': (item)
          '@': hyperweb.schema.ITEM
        '@': hyperweb.schema.CATALOG
  directory:
    category:
      '=': [0, 1]
      '@': (item)
    '@': hyperweb.schema.ITEM
- id: [0, 5]
  name: Varia
  info: Category of items that do not belong to any specific category
  class_name: hyperweb.item.Item
  fields:
    name:
      schema: {'@': hyperweb.schema.STRING}
    title:
      schema: {'@': hyperweb.schema.STRING}
- id: [0, 6]
  name: Code
  info: "Source code. May keep information about programming language.\n         \
    \       If Code item is used in a context where a single object (a class, a function)\
    \ is expected,\n                the `name` property must be set and equal to the\
    \ name of the object that should be imported\n                after compilation.\
    \ Some uses may allow multiple names to be declared.\n              "
  fields:
    language:
      schema: {'@': hyperweb.schema.STRING}
    source:
      schema: {'@': hyperweb.schema.CODE}
- id: [0, 7]
  name: Text
  info: Plain or rich text for human consumption. May keep information about language
    and/or markup.
  fields:
    language:
      schema: {'@': hyperweb.schema.STRING}
    markup:
      schema: {'@': hyperweb.schema.STRING}
    text:
      schema: {'@': hyperweb.schema.TEXT}
- id: [0, 8]
  name: File
  info: 'Binary or text file that can be accompanied with information about its format:
    pdf, jpg, zip, ...'
  class_name: hyperweb.item.File
  fields:
    path:
      schema: {'@': hyperweb.schema.STRING}
    format:
      schema: {'@': hyperweb.schema.STRING}
    content:
      schema:
        schemas:
          bin: {'@': hyperweb.schema.BYTES}
          txt: {'@': hyperweb.schema.TEXT}
        '@': hyperweb.schema.VARIANT
- id: [6, 1]
  language: css
  source: "\n        /*** GENERAL STYLES */\n        # html {\n        #   font-family:\
    \ 'Quattrocento Sans', \"Helvetica Neue\", Helvetica, Arial, sans-serif;\n   \
    \     #   font-size: 16px;\n        #   color: #333;\n        # }\n\n        html\
    \ {\n          --ct-cell-pad: 35px;          /* default left & right padding of\
    \ all table cells */\n          --ct-nested-offset: 50px;     /* distance between\
    \ left edges of a nested catalog and its container catalog */\n          --ct-th1-width:\
    \ 300px;\n          --ct-th2-width: calc(var(--ct-th1-width) - var(--ct-nested-offset));\n\
    \          --textarea-height: 12rem;\n        }\n        body {\n          width:\
    \ 1120px;\n          margin: 0 auto;\n          padding-bottom: 50px;\n      \
    \  }\n        \n        h1, h2, h3 { margin-top: 0.8em; margin-bottom: 0.6em;\
    \ }\n        \n        a { color: #006ecc }\n        a:visited { color: #00427a\
    \ }\n        .catlink { font-size: 14px; margin-top: -20px }\n        \n     \
    \   /*** SITEWIDE */\n        \n        .btn { border: none; border-radius: 0;\
    \ }\n        .btn-primary, .btn-primary.disabled, .btn-primary:disabled      \
    \ { background-color: #5b8fdd; }\n        .btn-primary:hover                 \
    \                              { background-color: #4b78bb; }\n        .btn-secondary,\
    \ .btn-secondary.disabled, .btn-secondary:disabled { background-color: #7e8993;\
    \ }\n        \n        /*** UTILITIES */\n        \n        .scroll {\n      \
    \      overflow: scroll;\n            max-height: var(--textarea-height);\n  \
    \          border-bottom: 1px solid rgba(0,0,0,0.1);\n            border-right:\
    \  1px solid rgba(0,0,0,0.1);\n            resize: vertical;\n        }\n    \
    \    .scroll[style*=\"height\"] {\n            max-height: unset;            \
    \  /* this allows manual resizing (resize:vertical) to exceed predefined max-height\
    \ */\n        }\n        \n        /*** WIDGETS */\n        \n        .ace-editor\
    \ {\n            --bk-color: rgba(255,255,255,0.3);\n            background-color:\
    \ var(--bk-color);\n            height: var(--textarea-height);\n            width:\
    \ 100%;\n            line-height: 1.4;\n            font-family: var(--bs-font-monospace);\n\
    \            font-size: 13px;\n            resize: vertical;        /* editor\
    \ box resizing requires editor.resize() to be invoked by ResizeObserver */\n \
    \           /*margin-left: -10px;      /* shift the editor to better align inner\
    \ text with text of surrounding rows in a catalog */\n            /*border-left:\
    \ 8px solid var(--bk-color);*/\n        }\n\n        /*** ITEM PAGE */\n\n   \
    \     .ct-color0                      { background: #e2eef9; }   /* #D0E4F5 */\n\
    \        .ct-color1                      { background: #f6f6f6; }\n\n        .catalog-1\
    \ th, .catalog-1 td    { padding: 14px var(--ct-cell-pad) 11px; /*border-right:\
    \ none;*/ }\n        .wrap-offset                    { padding-left: calc(var(--ct-nested-offset)\
    \ - var(--ct-cell-pad)); }\n        td.ct-nested                    { padding-right:\
    \ 0px; padding-bottom: 0px; }\n        td.ct-flags                     { width:\
    \ 30px; padding-left:20px; padding-right:20px; }\n\n        .catalog-1, .catalog-2\
    \          { border-collapse: collapse; table-layout: fixed; }\n        .catalog-1\
    \ th, .catalog-2 th    { border-right: 1px solid #fff; }\n        .catalog-1 tr:not(:last-child)\
    \  { border-bottom: 1px solid #fff; }\n\n        .catalog-1                  \
    \    { width: 100%; min-width: 100%; max-width: 100%; }\n        .catalog-1 th\
    \                   { width: var(--ct-th1-width); min-width: var(--ct-th1-width);\
    \ max-width: var(--ct-th1-width); }\n\n        /* th widths get reduced by 55px\
    \ when nesting a subcatalog to account for paddings of outer td + div */\n   \
    \     .catalog-2                  { width: 100%; }\n        .catalog-2 th    \
    \           { padding-left: 15px; width: var(--ct-th2-width); min-width: var(--ct-th2-width);\
    \ max-width: var(--ct-th2-width); }\n        /*.catalog-2 th               { width:\
    \ 195px; min-width: 195px; max-width: 195px; padding-left: 15px; }*/\n       \
    \ \n        .catalog-1 .ct-field        { font-weight: bold;   font-size: 15px;\
    \ }\n        .catalog-2 .ct-field        { font-weight: normal; font-style: italic;\
    \ }\n        \n        .ct-value > *               { font-size: 14px; font-family:\
    \ monospace; /* courier */ }\n        .ct-value .field .default   { color: #888;\
    \ }\n        .ct-value .field .info      { font-style: italic; }\n        .ct-value\
    \ pre               { margin-bottom: 0px; font-size: 13px; }\n    "
- id: [6, 2]
  language: javascript
  source: "\n        \"use strict\";\n    "
- id: [6, 3]
  language: hypertag
  source: "\n    \n        %page @body\n            doctype\n            ...html @body\n\
    \        \n        %assets_external\n            # jQuery 3.6.0\n            script\
    \ src=\"https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js\" integrity=\"\
    sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=\" crossorigin=\"anonymous\"\
    \n            # Bootstrap 5.0.2\n            link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css\"\
    \ rel=\"stylesheet\" integrity=\"sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC\"\
    \ crossorigin=\"anonymous\"\n            script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js\"\
    \ integrity=\"sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM\"\
    \ crossorigin=\"anonymous\"\n            # Lodash 4.17.21 (https://lodash.com/)\n\
    \            script src=\"https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js\"\
    \ integrity=\"sha256-qXBd/EfAdjOA2FGrGAG+b3YBn2tn5A6bhz+LSgYD96k=\" crossorigin=\"\
    anonymous\"\n\n            # # React\n            # # Uwaga: podczas wdrażania\
    \ aplikacji do środowiska produkcyjnego, zamień \"development.js\" na \"production.min.js\"\
    \n            # script src=\"https://unpkg.com/react@17/umd/react.development.js\"\
    \ crossorigin=True\n            # script src=\"https://unpkg.com/react-dom@17/umd/react-dom.development.js\"\
    \ crossorigin=True\n            \n            # # Lit\n            # script type=\"\
    module\" !\n            #     import {LitElement, html, css} from 'https://unpkg.com/lit-element/lit-element.js?module';\n\
    \            #     window.LitElement = LitElement;\n            #\n          \
    \  #     class MyElement extends LitElement {\n            #         static get\
    \ properties() { return { mood: {type: String} } }\n            #         static\
    \ get styles() { return css`.mood { color: green; }`; }\n            #       \
    \  render() { return html`Web Components are <span class=\"mood\">${this.mood}</span>!`;\
    \ }\n            #     }\n            #     customElements.define('my-element',\
    \ MyElement);\n  \n            # ACE (code editor)\n            # keyboard shortcuts:\
    \ https://github.com/ajaxorg/ace/wiki/Default-Keyboard-Shortcuts\n           \
    \ # existing highlighters: https://github.com/ajaxorg/ace/tree/master/lib/ace/mode\n\
    \            # default commands and shortcuts: https://github.com/ajaxorg/ace/tree/master/lib/ace/commands\
    \ (-> editor.commands.addCommand() ..removeCommand())\n            script src=\"\
    https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ace.js\" integrity=\"sha512-GZ1RIgZaSc8rnco/8CXfRdCpDxRCphenIiZ2ztLy3XQfCbQUSCuk8IudvNHxkRA3oUg6q0qejgN/qqyG1duv5Q==\"\
    \ crossorigin=\"anonymous\" referrerpolicy=\"no-referrer\"\n            \n   \
    \         # # CodeMirror (code editor)\n            # script src=\"https://cdn.jsdelivr.net/npm/codemirror@5.62.3/lib/codemirror.min.js\"\
    \n\n        %assets_internal\n            script type=\"module\" src=\"/sys.file:1/get\"\
    \n    \n        %assets\n            assets_external\n            assets_internal\n\
    \        \n        %protocol @body classname\n            # asset \".../protocols.js\"\
    \n            div .widget protocol=classname\n                @body\n    \n  \
    \      %catalog_row key value schema\n            # a row containing an atomic\
    \ value of a data field (not a subcatalog)\n            th .ct-field | $key\n\
    \            # td .ct-flags | *\n            td .ct-value / $schema.display(value)\n\
    \    \n        %catalog_2 data schema start_color=0\n            $c = start_color\n\
    \            div .wrap-offset : table .catalog-2\n                for name, value\
    \ in data.items()\n                    tr class=\"ct-color{c}\"\n            \
    \            catalog_row $name $value $schema\n                    # $c = 1 -\
    \ c\n        \n        %catalog_1 item\n            $c = 0          # alternating\
    \ color of rows: 0 or 1\n            table .catalog-1\n                for name,\
    \ value in item.data.items()\n                    $schema = item.get_schema(name)\n\
    \                    tr class=\"ct-color{c}\"\n                        if schema.is_catalog\n\
    \                            td .ct-nested colspan=2\n                       \
    \         div .ct-field | {name}\n                                catalog_2 $value\
    \ $schema.values $c\n                        else\n                          \
    \  catalog_row $name $value $schema\n                    $c = 1 - c\n        \
    \            \n        %properties item\n            # for field, value in item.data.items()\n\
    \            #     $schema = $item.get_schema(field)\n            #     $schema_json\
    \ = generic_schema.dump_json(schema)\n            #     $entry = (schema_json,\
    \ $item.dump_data())\n            #     $entries.append(entry)\n            from\
    \ hyperweb.serialize import $JSON\n            \n            custom \"hw-item-page\"\
    \n                # p style=\"display:none\" type=\"json\" #item     | $item.dump_data()\n\
    \                p style=\"display:none\" type=\"json\" #item     | $JSON.dump(item.data)\n\
    \                p style=\"display:none\" type=\"json\" #category | $item.category.dump_data()\n\
    \                < catalog_1 $item\n                div style=\"text-align:right;\
    \ padding-top:20px\"\n                    button #cancel-changes .btn .btn-secondary\
    \ disabled=False | Cancel\n                    button #save-changes   .btn .btn-primary\
    \   disabled=False | Save\n    "
- id: [1, 1]
  items:
    base.hy: [6, 3]
    base.css: [6, 1]
- id: [8, 1]
  path: /home/marcin/Documents/priv/catalog/src/django-app/hyperweb/static/protocols.js
- id: [2, 1]
  name: Meta
  categories: {category: 0, item: 5}
- id: [2, 2]
  name: System
  categories: {space: 2, app: 3, site: 4, dir: 1, file: 8}
- id: [3, 1]
  name: Items
  base_url: http://localhost:8001/admin/item/
  url_scheme: raw
- id: [3, 2]
  name: Catalog
  base_url: http://localhost:8001/
  spaces: {meta: 1, sys: 2}
- id: [4, 1]
  name: catalog.wiki
  directory:
    '=': [1, 1]
    '@': (item)
  apps: {items: 1, catalog: 2}
- id: [5, 1]
  title: Ala ma kota Sierściucha i psa Kłapoucha.
- id: [5, 2]
  title: ąłęÓŁŻŹŚ
  name: test_item
