<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EJS Test Page</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 20px; }
        .article { margin: 20px 0; padding: 15px; border: 1px solid #ddd; }
    </style>
</head>
<body>
    <%# Include the header with custom navigation %>
    <%- await include('partials/header', {
        title: 'EJS Test Page',
        navLinks: ['Home', 'Articles', 'About']
    }) %>

    <main>
        <h2>Dynamic Content Test</h2>

        <%# Test async data loading %>
        <% const testData = await import_('./data/test_data.js') %>
        <% const articles = testData.articles %>

        <div class="articles">
            <% for (const article of articles) { %>
                <div class="article">
                    <h3><%= article.title %></h3>
                    <p><%= article.content %></p>
                </div>
            <% } %>
        </div>

        <%# Test async function call %>
        <% const specificArticle = await testData.fetchArticle(1) %>
        <div class="featured-article">
            <h2>Featured Article</h2>
            <div class="article">
                <h3><%= specificArticle.title %></h3>
                <p><%= specificArticle.content %></p>
            </div>
        </div>
    </main>

    <%# Include the footer with custom links %>
    <%- await include('partials/footer', {
        footerLinks: [
            { url: '/privacy', text: 'Privacy Policy' },
            { url: '/terms', text: 'Terms of Service' }
        ]
    }) %>
</body>
</html>
