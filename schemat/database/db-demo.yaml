- __id:
    - 1
    - 100
  name: catalog.wiki
  URL: http://127.0.0.1:3000
  path_internal: /$
  routes:
    - - - 8
        - 101
      - $
    - - - 5
        - 103
      - apps
    - - - 5
        - 104
      - site
    - - - 5
        - 1
      - system
    - - - 5
        - 106
    - - - 9
        - 101
- __id:
    - 3
    - 101
  content: export let print = console.log
- __id:
    - 3
    - 102
  content: |-
    import {print} from '../site/utils.js'
    export function check() { print('called widgets.js:check()') } 
    //let fs = await importLocal('fs')
    //print('fs:',fs)
- __id:
    - 5
    - 102
  name: /demo
- __id:
    - 5
    - 103
  name: /apps
  files:
    demo:
      - 5
      - 102
    paperity:
      - 5
      - 107
- __id:
    - 5
    - 104
  name: /site
  files:
    utils.js:
      - 3
      - 101
    widgets.js:
      - 3
      - 102
- __id:
    - 8
    - 101
  name: /$
- __id:
    - 9
    - 101
  name: Catalog
  spaces:
    sys.category:
      - 0
      - 0
    sys.site:
      - 0
      - 1
    sys.dir:
      - 0
      - 5
    sys.file:
      - 0
      - 3
- __id:
    - 0
    - 100
  name: Varia
  info: Category of items that do not belong to any specific category.
  class_body: >-
    static check() { import('/system/local/utils.js').then(mod =>
    console.log("Varia.code: imported ", mod)) }

    static error() { throw new Error('Varia/code/error()') }
  fields:
    title:
      "@": schemat.type.STRING
- __id:
    - 100
    - 101
  title: Ala ma kota Sierściucha i psa Kłapoucha.
- __id:
    - 100
    - 102
  title: ąłęÓŁŻŹŚ
- __id:
    - 5
    - 106
  name: domain
  info: Folder with public static files that must be accessible at the domain
    root, like .../favicon.ico, /robots.txt etc.
  files:
    favicon.ico:
      - 4
      - 100
- __id:
    - 0
    - 200
  __data:
    - - TwitterPost
      - name
    - - text:
          - - 10
            - 1
          - {}
      - fields
    - - import { P, BR } from '/system/local/react-utils.js'
      - class_init
    - - view: |
          let text = this.get('text')
          return P('Post:', BR(), text)
      - views
    - - |
        // DRAFT...
        // import {print} from '/site/utils.js'
        // console.log('print:', print)
        // console.log('TwitterPost/code executed')

        // import {check} from '/site/widgets.js'
        // import {Item} from '/system/local/item.js'
        // import vm from 'vm'
        // check()
        // console.log('registry:', registry)
        // console.log('Item:', Item)
        // console.log('vm:', vm)
      - class_init
    - - |
        VIEW_view_old() {
            this.assertLoaded()
            console.log('this.utils #2:', this.utils)
            console.log('TwitterPost: imported print()')
            let text = this.get('text')
            return P('Post', BR(), text)
        }
      - class_body
    - - |-
        // FOR RECORD ONLY...
        // this method works OK (no await import)
        init_OK() {
            console.log('this.utils #1: started...')
            return import('/site/utils.js').then(utils => {
                this.utils = utils
                console.log('this.utils #1:', this.utils)
            })
        }
        // this method works WRONG: the web request is being completed while 
        // the method waits on await import below (!?)
        async init_ERR() {
            console.log('this.utils #1: started...')
            let utils = await import('/site/utils.js')
            this.utils = utils
            console.log('this.utils #1:', this.utils)
        }
      - class_body
- __id:
    - 4
    - 100
  name: favicon.ico
  path: /home/marcin/Documents/priv/catalog/src/schemat/assets/favicon.ico
- __id:
    - 51
    - 100
  name: mysql-paperity
  info: |
    Connects through ssh tunneling. Must launch this in console beforehand:
    autossh -p 55522 -f paperity@srv.paperity.org -L 3307:127.0.0.1:3306 -N
  host: localhost
  port: "3307"
  user: paperity
  database: paperity
  password: pe45n1bc
  tables:
    /apps/paperity/Journal: pap_journals
    /apps/paperity/Paper: pap_papers_view
  readonly: true
- __id:
    - 200
    - 100
  name: Post A
  text: Ala ma kota
- __id:
    - 5
    - 107
  name: /paperity
  files:
    Journal:
      - 0
      - 201
    Paper:
      - 0
      - 202
- __id:
    - 0
    - 201
  name: Journal
  info: Paperity's Journal object.
  fields:
    pid:
      - - 10
        - 3
      - {}
    title:
      "@": schemat.type.STRING
    issn:
      - - 10
        - 1
      - {}
    publisher:
      - - 10
        - 1
      - {}
    url:
      - - 10
        - 4
      - {}
    homepage:
      - - 10
        - 4
      - {}
    xid:
      - - 10
        - 1
      - {}
    description:
      - - 10
        - 1
      - {}
    source_url:
      - - 10
        - 4
      - {}
    created_at:
      - - 10
        - 1
      - {}
    updated_at:
      - - 10
        - 1
      - {}
    indexed_at:
      - - 10
        - 1
      - {}
    indexed_full:
      - - 10
        - 1
      - {}
    published_at:
      - - 10
        - 1
      - {}
    papers_all:
      - - 10
        - 3
      - {}
    papers_published:
      - - 10
        - 3
      - {}
- __id:
    - 0
    - 202
  name: Paper
  info: Paperity's Paper object.
  fields:
    pid:
      - - 10
        - 3
      - {}
    title:
      - - 10
        - 1
      - {}
    authors:
      - - 10
        - 1
      - {}
    url:
      - - 10
        - 4
      - {}
    homepage:
      - - 10
        - 4
      - {}
    abstract:
      - - 10
        - 1
      - {}
    journal_id:
      - - 10
        - 2
      - {}
    date:
      - - 10
        - 1
      - {}
    birth:
      - - 10
        - 1
      - {}
    year:
      - - 10
        - 2
      - {}
    languages:
      - - 10
        - 1
      - {}
    created_at:
      - - 10
        - 1
      - {}
    updated_at:
      - - 10
        - 1
      - {}
    harvested_at:
      - - 10
        - 1
      - {}
    extracted_at:
      - - 10
        - 1
      - {}
    published_at:
      - - 10
        - 1
      - {}
    doi:
      - - 10
        - 1
      - {}
    url_pdf:
      - - 10
        - 4
      - {}
    pdf_name:
      - - 10
        - 1
      - {}
    rawtext:
      - - 10
        - 1
      - {}
    source_url:
      - - 10
        - 4
      - {}
    pic_original_name:
      - - 10
        - 1
      - {}
  html_assets: >
    <script src="https://paperity.org/static/js/dc9afabe2e.js"></script>

    <script src="https://paperity.org/static/js/jquery-1.11.1.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.devbridge-autocomplete/1.2.26/jquery.autocomplete.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.textcomplete/1.7.3/jquery.textcomplete.js"></script>


    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>


    <link href="https://paperity.org/static/css/paperity.css" rel="stylesheet">

    <script src="https://paperity.org/static/js/paperity.js"></script>
  class_init: xxx
