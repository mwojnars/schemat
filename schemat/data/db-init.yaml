- __id: 1001
  name: main-site
  base_url: http://127.0.0.1:3000
  cluster:
    "@": 1025
  database:
    "@": 1002
  entries:
    apps:
      "@": 1009
    site:
      "@": 1010
    system:
      "@": 1019
    "*domain":
      "@": 1011
    "*main":
      "@": 1014
    "@": schemat:Catalog
  default_path: /system/default
  _category_:
    "@": 1
  "@": schemat:Data
- __id: 1002
  name: DB
  rings:
    - "@": 1003
    - "@": 1004
  _category_:
    "@": 11
  "@": schemat:Data
- __id: 1003
  name: kernel
  data_sequence:
    "@": 1012
  indexes:
    idx_category_item:
      "@": 1013
    "@": :Map
  readonly: false
  start_id: 0
  stop_id: 1000
  _category_:
    "@": 12
  "@": schemat:Data
- __id: 1004
  name: db-init
  data_sequence:
    "@": 1027
  indexes:
    idx_category_item:
      "@": 1028
    "@": :Map
  readonly: false
  start_id: 1001
  _category_:
    "@": 12
  "@": schemat:Data
- __id: 1005
  content: export let print = console.log
  _category_:
    "@": 3
  _container_:
    "@": 1010
  "@": schemat:Data
- __id: 1006
  content: |-
    import {print} from '../site/utils.js'
    export function check() { print('called widgets.js:check()') } 
    //let fs = await import('fs')
    //print('fs:',fs)
  _category_:
    "@": 3
  _container_:
    "@": 1010
  "@": schemat:Data
- __id: 1007
  name: favicon.ico
  local_path: ./assets/favicon.ico
  _category_:
    "@": 4
  _container_:
    "@": 1011
  "@": schemat:Data
- __id: 1008
  name: /demo
  _category_:
    "@": 5
  _container_:
    "@": 1009
  "@": schemat:Data
- __id: 1009
  name: /apps
  entries:
    demo:
      "@": 1008
    paperity:
      "@": 1012
    "@": schemat:Catalog
  _category_:
    "@": 5
  _container_:
    "@": 1001
  "@": schemat:Data
- __id: 1010
  name: /site
  entries:
    utils.js:
      "@": 1005
    widgets.js:
      "@": 1006
    "@": schemat:Catalog
  _category_:
    "@": 5
  _container_:
    "@": 1001
  "@": schemat:Data
- __id: 1011
  name: domain
  info: Directory with public static files that must be accessible at the domain
    root, like .../favicon.ico, /robots.txt etc.
  entries:
    favicon.ico:
      "@": 1007
    "@": schemat:Catalog
  _category_:
    "@": 5
  _container_:
    "@": 1001
  "@": schemat:Data
- __id: 1012
  ring:
    "@": 201
  schema:
    fields:
      id:
        "@": schemat/types/type.js:INTEGER
      "@": :Map
    properties: []
    _field_types:
      - "@": schemat/types/type.js:INTEGER
    "@": schemat/db/records.js:RecordSchema
  blocks:
    - "@": 1015
  derived:
    - "@": 1013
  _category_:
    "@": 14
  "@": schemat:Data
- __id: 1013
  ring:
    "@": 201
  schema:
    fields:
      cid:
        blank: true
        "@": schemat/types/type.js:INTEGER
      id:
        "@": schemat/types/type.js:INTEGER
      "@": :Map
    properties: []
    "@": schemat/db/records.js:RecordSchema
  blocks:
    - "@": 1026
  derived: []
  source:
    "@": 205
  _category_:
    "@": 17
  "@": schemat:Data
- __id: 1014
  name: main_space
  spaces:
    sys.category:
      "@": 0
    "@": schemat:Catalog
  _category_:
    "@": 9
  _container_:
    "@": 1001
  "@": schemat:Data
- __id: 1015
  sequence:
    "@": 205
  filename: ./schemat/data/kernel.yaml
  format: data-yaml
  _category_:
    "@": 19
  "@": schemat:Data
- __id: 1016
  title: Ala ma kota Sierściucha i psa Kłapoucha.
  title/2: drugi tytuł...
  _category_:
    "@": 1029
  "@": schemat:Data
- __id: 1017
  title: ąłęÓŁŻŹŚ
  "@": schemat:Data
- __id: 1018
  name: Post A
  text: Ala ma kota
  _category_:
    "@": 1031
  "@": schemat:Data
- __id: 1019
  name: /system
  entries:
    categories:
      "@": 1022
    cluster:
      "@": 1023
    database:
      "@": 1024
    default:
      "@": 1021
    local:
      "@": 1020
    "@": schemat:Catalog
  _container_:
    "@": 1001
  _category_:
    "@": 5
  "@": schemat:Data
- __id: 1020
  name: /system/local
  local_path: .
  _container_:
    "@": 1019
  _category_:
    "@": 6
  "@": schemat:Data
- __id: 1021
  name: default namespace
  info: All objects accessible by their IDs.
  _container_:
    "@": 1019
  _category_:
    "@": 8
  "@": schemat:Data
- __id: 1022
  name: /system/categories
  _container_:
    "@": 1019
  _category_:
    "@": 5
  "@": schemat:Data
- __id: 1023
  name: /system/cluster
  _container_:
    "@": 1019
  _category_:
    "@": 5
  "@": schemat:Data
- __id: 1024
  name: /system/database
  _container_:
    "@": 1019
  _category_:
    "@": 5
  "@": schemat:Data
- __id: 1025
  name: main-cluster
  _category_:
    "@": 21
  "@": schemat:Data
- __id: 1026
  sequence:
    "@": 206
  filename: ./schemat/data/kernel.idx_category_item.jl
  format: index-jl
  _category_:
    "@": 20
  "@": schemat:Data
- __id: 1027
  ring:
    "@": 202
  schema:
    fields:
      id:
        "@": schemat/types/type.js:INTEGER
      "@": :Map
    properties: []
    _field_types:
      - "@": schemat/types/type.js:INTEGER
    "@": schemat/db/records.js:RecordSchema
  blocks:
    - "@": 1032
  derived:
    - "@": 1028
  _category_:
    "@": 14
  "@": schemat:Data
- __id: 1028
  ring:
    "@": 202
  schema:
    fields:
      cid:
        blank: true
        "@": schemat/types/type.js:INTEGER
      id:
        "@": schemat/types/type.js:INTEGER
      "@": :Map
    properties: []
    "@": schemat/db/records.js:RecordSchema
  blocks:
    - "@": 1033
  derived: []
  source:
    "@": 209
  _category_:
    "@": 17
  "@": schemat:Data
- __id: 1029
  name: Varia
  info: Category of items that do not belong to any specific category.
  class_body: >-
    static check() { import('/system/local/schemat/common/utils.js').then(mod =>
    console.log("Varia.code: imported ", mod)) }

    static error() { throw new Error('Varia/code/error()') }
  schema:
    title:
      "@": schemat/types/type.js:STRING
    "@": schemat:Catalog
  _category_:
    "@": 0
  "@": schemat:Data
- __id: 1030
  name: MysqlDB
  class_path: /system/local/schemat/db/mysql.js:MySQL
  schema:
    host:
      "@": schemat/types/type.js:STRING
    port:
      "@": schemat/types/type.js:STRING
    user:
      "@": schemat/types/type.js:STRING
    database:
      "@": schemat/types/type.js:STRING
    password:
      "@": schemat/types/type.js:STRING
    connection:
      info: Javascript object containing connection parameters.
      "@": schemat/types/type.js:GENERIC
    tables:
      info: Mapping of categories (their paths) to names of sql tables.
      values:
        "@": schemat/types/type.js:STRING
      "@": schemat/types/catalog.js:CATALOG
    offset:
      "@": schemat/types/type.js:INTEGER
    readonly:
      "@": schemat/types/type.js:BOOLEAN
    "@": schemat:Catalog
  defaults:
    _class_: /system/local/schemat/db/mysql.js:MySQL
    "@": schemat:Catalog
  _category_:
    "@": 0
  "@": schemat:Data
- __id: 1031
  name: TwitterPost
  schema:
    text:
      "@": schemat/types/type.js:STRING
    "@": schemat:Catalog
  class_init: |
    // DRAFT...
    // import {print} from '/site/utils.js'
    // console.log('print:', print)
    // console.log('TwitterPost/code executed')

    // import {check} from '/site/widgets.js'
    // import {Item} from '/system/local/schemat/core/item.js'
    // import vm from 'vm'
    // check()
    // console.log('schemat:', schemat)
    // console.log('Item:', Item)
    // console.log('vm:', vm)
  views:
    view: |
      let text = this.text
      return P('Post:', BR(), text)
    "@": schemat:Catalog
  class_body: |-
    // FOR RECORD ONLY...
    // this method works OK (no await import)
    init_OK() {
        console.log('this.utils #1: started...')
        return import('/site/utils.js').then(utils => {
            this.utils = utils
            console.log('this.utils #1:', this.utils)
        })
    }
    // this method works WRONG: the web request is being completed while 
    // the method waits on await import below (!?)
    async init_ERR() {
        console.log('this.utils #1: started...')
        let utils = await import('/site/utils.js')
        this.utils = utils
        console.log('this.utils #1:', this.utils)
    }
  _category_:
    "@": 0
  "@": schemat:Data
- __id: 1032
  sequence:
    "@": 209
  filename: ./schemat/data/db-init.yaml
  format: data-yaml
  _category_:
    "@": 19
  insert_mode: compact
  "@": schemat:Data
- __id: 1033
  sequence:
    "@": 210
  filename: ./schemat/data/db-init.idx_category_item.jl
  format: index-jl
  _category_:
    "@": 20
  "@": schemat:Data
